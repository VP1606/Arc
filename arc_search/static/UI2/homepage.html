<html>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <head>
        <link rel="icon" href="/static/favicon.ico" type="image/x-icon">
        <link rel="stylesheet" type="text/css" href="/static/UI2/homestyle.css">
        <link rel="stylesheet" type="text/css" href="/static/UI2/stacks.css">
        <link rel="stylesheet" type="text/css" href="/static/UI2/spec_style.css">

        <script>
            // Function to toggle the dropdown content
            function toggleDropdown() {
                var dropdownContent = document.getElementById("dropdown-content");
                var backdrop = document.getElementById("backdrop");

                if (dropdownContent.style.opacity != 1) {
                    dropdownContent.style.opacity = 1;
                    dropdownContent.style.maxHeight = '400px';
                    backdrop.style.display = "block";
                } else {
                    dropdownContent.style.opacity = 0;
                    setTimeout(function() {
                        dropdownContent.style.maxHeight = '0px';
                    }, 300);
                    backdrop.style.display = "none";
                };
            };

            function filterNonNumeric(input) {
              if (modeIconBindings['name-search-btn'][2] == true || modeIconBindings['basket-btn'][2] == true) {
                //PASS
              } else {
                input.value = input.value.replace(/\D/g, '');
              };
            };

            function searchRouter() {
                if (eanExact == true) {
                    console.log("EXACT EAN");
                    // do_search();
                } else if (nameSearch == true) {
                    console.log("NAME SEARCH");
                    // do_name_search();
                } else if (eanSearch == true) {
                    console.log("EAN SEARCH");
                    // do_ean_search();
                } else if (basketMode == true) {
                    console.log("BASKET MODE");
                    // do_basket_search();
                } else {};
            };

        </script>

        <script src="/static/UI2/mode_control.js"></script>

    </head>
    <body style="background-color: black;">
        <div class="zstack" style="width: 100%; height: 100%;">

            <div id="backdrop" style="width: 100%; height: 100%; background-color: rgba(0,0,0,0.2); -webkit-backdrop-filter: blur(8px); backdrop-filter: blur(5px); z-index: 1; display: none;" onclick="toggleDropdown()"></div>

            <div style="width: 100%; height: 100%;">
                <center>
                    <img src="/static/UI2/img_assets/header_icons.png" style="height: 51px; padding-top: 5px;">
                </center>

                <center>
                    <div class="flex hstack" style="width: calc(100% - 34px); max-width: 530px; padding-top: 50px;">
                        <div id="main_mode_show" class="zstack" style="max-width: 200px; height: var(--mode-select-box-height); z-index: 2;" onclick="toggleDropdown()">
                            <img src="/static/UI2/img_assets/mode_select_border.png" style="width: 100%; height: var(--mode-select-box-height);">
                            <div class="flex hstack" style="width: 100%;">
                                <img id="main_mode_image" src="/static/UI2/img_assets/mode_icons/exact_ean.png" style="height: 17px; padding-left: 10px;">
                                <div class="spacer"></div>
                                <div id="mode_select_title">Exact EAN</div>
                            </div>

                            <div class="dropdown-content" id="dropdown-content" style="position: absolute; display: block; z-index: 2; padding-top: 70px; overflow: hidden; max-height: 0px; opacity: 0.0; transition: opacity 0.3s ease-in-out;">
                                <div id="exact-ean-btn" class="zstack" style="max-width: 200px; height: var(--mode-select-box-height); z-index: 2;" onclick="ClickMode(this)">
                                    <img src="/static/UI2/img_assets/mode_select_border.png" style="width: 100%; height: var(--mode-select-box-height);">
                                    <div class="flex hstack" style="width: 100%;">
                                        <img src="/static/UI2/img_assets/mode_icons/exact_ean.png" style="height: 17px; padding-left: 10px;">
                                        <div class="spacer"></div>
                                        <div id="mode_select_title">Exact EAN</div>
                                    </div>
                                </div>

                                <div id="name-search-btn" class="zstack" style="max-width: 200px; height: var(--mode-select-box-height); z-index: 2;" onclick="ClickMode(this)">
                                    <img src="/static/UI2/img_assets/mode_select_border.png" style="width: 100%; height: var(--mode-select-box-height);">
                                    <div class="flex hstack" style="width: 100%;">
                                        <img src="/static/UI2/img_assets/mode_icons/name_search.png" style="height: 17px; padding-left: 10px;">
                                        <div class="spacer"></div>
                                        <div id="mode_select_title">Name Search</div>
                                    </div>
                                </div>
    
                                <div id="ean-search-btn" class="zstack" style="max-width: 200px; height: var(--mode-select-box-height); z-index: 2;" onclick="ClickMode(this)">
                                    <img src="/static/UI2/img_assets/mode_select_border.png" style="width: 100%; height: var(--mode-select-box-height);">
                                    <div class="flex hstack" style="width: 100%;">
                                        <img src="/static/UI2/img_assets/mode_icons/ean_search.png" style="height: 17px; padding-left: 10px;">
                                        <div class="spacer"></div>
                                        <div id="mode_select_title">EAN Search</div>
                                    </div>
                                </div>
    
                                <div id="scan-btn" class="zstack" style="max-width: 200px; height: var(--mode-select-box-height); z-index: 2;" onclick="ClickMode(this)">
                                    <img src="/static/UI2/img_assets/mode_select_border.png" style="width: 100%; height: var(--mode-select-box-height);">
                                    <div class="flex hstack" style="width: 100%;">
                                        <img src="/static/UI2/img_assets/mode_icons/scan.png" style="height: 17px; padding-left: 10px;">
                                        <div class="spacer"></div>
                                        <div id="mode_select_title">Scan</div>
                                    </div>
                                </div>

                                <div id="basket-btn" class="zstack" style="max-width: 200px; height: var(--mode-select-box-height); z-index: 2;" onclick="ClickMode(this)">
                                    <img src="/static/UI2/img_assets/mode_select_border.png" style="width: 100%; height: var(--mode-select-box-height);">
                                    <div class="flex hstack" style="width: 100%;">
                                        <img src="/static/UI2/img_assets/mode_icons/basket.png" style="height: 17px; padding-left: 10px;">
                                        <div class="spacer"></div>
                                        <div id="mode_select_title">Basket</div>
                                    </div>
                                </div>
                            </div>

                        </div>
                        <div class="spacer"></div>
                        <p id="user-welcome-message">Welcome, Snowflake</p>

                    </div>

                </center>

                <center>
                    <div class="zstack" style="width: calc(100% - 34px); max-width: 530px; height: 50px; padding-top: 50px;">
                        <img src="/static/UI2/img_assets/search_box.png" id="search_box">
                        <div class="flex hstack" id="search_stack">
                            <input type="text" name="ean-code" id="search-field-typebox" placeholder="EAN" oninput="filterNonNumeric(this)">
                            <div class="spacer"></div>
                            <img src="/static/UI2/img_assets/search_button.png" id="search_button">
                        </div>
                    </div>
                </center>

                <center>
                    <div id="spec-search-container" style="background-color: red; width: 100%; height: auto;"></div>
                </center>

            </div>
        </div>
    </body>
</html>